const _0x1cc3 = [
  "üèÜNg∆∞·ªùi\x20d√πng\x20<b>",
  "849732OKdkLS",
  "address_USDT",
  "default",
  "query",
  "ABI_USDT_MAINNET",
  "</b>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20Vui\x20l√≤ng\x20n·∫°p\x20th√™m\x20v√†o\x20v√≠\x20ADMIN:\x20üí∏<b>",
  "toHex",
  "replace",
  "554781iiTFUK",
  "eth",
  "https://rinkeby.infura.io/v3/",
  "\x20BNB\x20cho\x20USER",
  "\x20USDT\x20cho\x20V√≠\x20ADMIN:\x20",
  "mainnet",
  "Contract",
  "mess",
  "\x20USDT\x20v√†o\x20V√≠!",
  "\x0atxHash:\x20",
  "call",
  "4eoNpET",
  "0x0",
  "CONTRACT_USDT_TEST",
  "utils",
  "result",
  "https://data-seed-prebsc-1-s1.binance.org:8545",
  "hex",
  "479622DkxckD",
  "getTransactionCount",
  "N·∫°p\x20ti·ªÅn\x20(N·ªôi\x20b·ªô)",
  "serialize",
  "toString",
  "1AXfSVd",
  "ADDRESS_ETH_USDT",
  "toWei",
  "CONTRACT_USDT_MAIN",
  "../config",
  "init",
  "1TrYOeA",
  "stringify",
  "email",
  "B·∫°n\x20ƒë√£\x20n·∫°p\x20$",
  "ether",
  "710259nvrnfB",
  "bep20",
  "205682ccZPhq",
  "bnb",
  "UPDATE\x20users\x20SET\x20money_usdt\x20=\x20money_usdt\x20+\x20?\x20where\x20nick_name\x20=\x20?",
  "estimateGas",
  "privateKey_USDT",
  "ABI_USDT_TESTNNET",
  "catch",
  "exports",
  "send",
  "</b>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20üèãÔ∏èS·ªë\x20d∆∞\x20v√≠\x20ADMIN\x20hi·ªán\x20t·∫°i\x20BNB:\x20<b>",
  "sign",
  "Transaction",
  "43356nXnwJv",
  "sendMessNap",
  "\x20v·ª´a\x20chuy·ªÉn\x20\x0aüìå\x200.0021\x20BSC\x20cho\x20V√≠\x20ng∆∞·ªùi\x20d√πng:\x20",
  "../helpers",
  "../database",
  "</b>\x20BNB\x20ph√≠\x20ƒë·ªÉ\x20chuy·ªÉn\x20",
  "\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20txHash:\x20",
  "methods",
  "ACXPSZEP9QKN5QU2NYDGTP72CRT86MMVAT",
  "then",
  "sendSignedTransaction",
  "</b>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20üèòƒê·ªãa\x20ch·ªâ\x20User:\x20",
  "PATH_SYS_CONFIG",
  "HttpProvider",
  "format",
  "\x20v·ª´a\x20chuy·ªÉn\x20\x0aüìåüí≤\x20",
  "IS_TEST_SMART_CHAIN",
  "providers",
  "fromWei",
  "success",
  "status",
  "getConfig",
  "petersburg",
  "SELECT\x20nick_name,\x20address_USDT,\x20privateKey_USDT\x20FROM\x20users\x20WHERE\x20email\x20=\x20?",
  "ethereumjs-tx",
  "gwei",
  "360455vwEVjR",
  "</b>\x0aüèòƒê·ªãa\x20ch·ªâ:\x20",
  "NumberFormat",
  ".\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20üèãÔ∏èV·ª´a\x20n·∫°p\x20USDT:\x20<b>",
  "üèÜüèòƒê·ªãa\x20ch·ªâ\x20ADMIN:\x20",
  "PRIVATE_KEY_ETH_TRANSACTION",
  "projectId",
  "rinkeby",
  "etherscan-api",
  "forCustomChain",
  "https://mainnet.infura.io/v3/",
  "ethereumjs-common",
  "0.0021",
  "testnet",
  "account",
  "nick_name",
  "https://bsc-dataseed1.binance.org",
  "bscscan-api",
  "encodeABI",
  "from",
  "INSERT\x20INTO\x20trade_history\x20(from_u,\x20to_u,\x20type_key,\x20type,\x20network,\x20currency,\x20amount,\x20real_amount,\x20pay_fee,\x20note,\x20status,\x20created_at)\x0a\x20\x20\x20\x20\x20\x20\x20\x20values(?,?,?,?,?,?,?,?,?,?,?,now())",
  "balance",
];
const _0x4662 = function (_0x4664ad, _0x559901) {
  _0x4664ad = _0x4664ad - 0x113;
  let _0x1cc357 = _0x1cc3[_0x4664ad];
  return _0x1cc357;
}; // l·∫•y ph·∫ßn t·ª≠ trong _0x1cc3
const _0x355c26 = _0x4662; // l·∫•y ph·∫ßn t·ª≠ trong _0x1cc3

(function (_0x1a5f5b, _0x694ab0) {
  const _0x38e771 = _0x4662;
  while (!![]) {
    try {
      const _0x5df80e =
        parseInt(_0x38e771(0x141)) +
        parseInt(_0x38e771(0x12f)) * parseInt(_0x38e771(0x146)) +
        parseInt(_0x38e771(0x179)) * -parseInt(_0x38e771(0x14c)) +
        parseInt(_0x38e771(0x15f)) * -parseInt(_0x38e771(0x13a)) +
        parseInt(_0x38e771(0x127)) +
        -parseInt(_0x38e771(0x153)) +
        -parseInt(_0x38e771(0x151));
      if (_0x5df80e === _0x694ab0) break;
      else _0x1a5f5b["push"](_0x1a5f5b["shift"]());
    } catch (_0x5a8545) {
      _0x1a5f5b["push"](_0x1a5f5b["shift"]());
    }
  }
})(_0x1cc3, 0x6a08b);
// console.log(_0x355c26())

const Web3 = require("web3"),
  Tx = require(_0x355c26(0x177))[_0x355c26(0x15e)],
  common = require(_0x355c26(0x11b)),
  db = require(_0x355c26(0x163)),
  Tele = require("../auth/telegram_notify"),
  config = require(_0x355c26(0x14a)),
  Helper = require(_0x355c26(0x162)),
  fileSys = config[_0x355c26(0x16b)];
var redataSys = Helper[_0x355c26(0x174)](fileSys), // c√≥ th·ªÉ l√† c√°i file stSys.json
  TOKEN_KEY_Ether = "X6P7HHXBKYX2G6DPY5BTKKIIMUU67F1JKV",
  TOKEN_KEY_Bsc = _0x355c26(0x167), // ACXPSZEP9QKN5QU2NYDGTP72CRT86MMVAT
  apiEther = null,
  apiBsc = null,
  web3 = null,
  web3Bsc = null,
  LIST_USER_ONLINE = null,
  ContractAddress = null,
  USDTJSON = null,
  USDT_BSC = null;
function setConnectSmartChain(_0x4731d0) {
  const _0x43e8d0 = _0x355c26;
  !_0x4731d0
    ? ((USDTJSON = Helper["getConfig"](config[_0x43e8d0(0x12b)])),
      (ContractAddress = redataSys[_0x43e8d0(0x149)]),
      (apiEther = require(_0x43e8d0(0x118))[_0x43e8d0(0x14b)](
        TOKEN_KEY_Ether,
        _0x43e8d0(0x134)
      )),
      (web3 = new Web3(
        new Web3[_0x43e8d0(0x170)][_0x43e8d0(0x16c)](
          _0x43e8d0(0x11a) + redataSys["projectId"]
        )
      )),
      (apiBsc = require(_0x43e8d0(0x121))[_0x43e8d0(0x14b)](
        TOKEN_KEY_Bsc,
        _0x43e8d0(0x134)
      )), // require("bscscan-api").init("ACXPSZEP9QKN5QU2NYDGTP72CRT86MMVAT", "mainnet")
      (web3Bsc = new Web3(
        new Web3["providers"][_0x43e8d0(0x16c)](_0x43e8d0(0x120))
      )), // new Web3(new Web3["providers"]["HttpProvider"]("https://bsc-dataseed1.binance.org"))
      (USDT_BSC = new web3Bsc[_0x43e8d0(0x130)][_0x43e8d0(0x135)](
        USDTJSON,
        ContractAddress
      )))
    : ((USDTJSON = Helper[_0x43e8d0(0x174)](config[_0x43e8d0(0x158)])),
      (ContractAddress = redataSys[_0x43e8d0(0x13c)]),
      (apiEther = require(_0x43e8d0(0x118))[_0x43e8d0(0x14b)](
        TOKEN_KEY_Ether,
        _0x43e8d0(0x117)
      )),
      (web3 = new Web3(
        new Web3[_0x43e8d0(0x170)]["HttpProvider"](
          _0x43e8d0(0x131) + redataSys[_0x43e8d0(0x116)]
        )
      )),
      (apiBsc = require(_0x43e8d0(0x121))[_0x43e8d0(0x14b)](
        TOKEN_KEY_Bsc,
        _0x43e8d0(0x11d)
      )),
      (web3Bsc = new Web3(
        new Web3["providers"][_0x43e8d0(0x16c)](_0x43e8d0(0x13f))
      )),
      (USDT_BSC = new web3Bsc[_0x43e8d0(0x130)]["Contract"](
        USDTJSON,
        ContractAddress
      )));
}
setConnectSmartChain(redataSys[_0x355c26(0x16f)]),
  setInterval(() => {
    const _0x5f90e0 = _0x355c26;
    (redataSys = Helper[_0x5f90e0(0x174)](fileSys)),
      setConnectSmartChain(redataSys["IS_TEST_SMART_CHAIN"]);
  }, 0xea60);
function formatPrice(_0x5eb8cb, _0x48c827) {
  const _0xc1569 = _0x355c26;
  var _0xf57b20 = new Intl[_0xc1569(0x17b)]("en-US", {
    minimumFractionDigits: _0x48c827,
  });
  return _0xf57b20[_0xc1569(0x16d)](_0x5eb8cb);
}
// h√†m n√†y chuy·ªÉn bnb cho user sao cho ƒë·ªß 0.0021 ƒë·ªÉ th·ª±c hi·ªán chuy·ªÉn usdt
async function SEND_BNB_TO_WALLET_USER(
  _0x1f8854, // 0.0021 bnb - s·ªë d∆∞ bnb c·ªßa user
  _0x54db7c, // s·ªë d∆∞ usdt c·ªßa user
  _0x54e9ef, // {nick_name, address_USDT, privateKey_USDT}.nick_name
  _0x338b3b // {nick_name, address_USDT, privateKey_USDT}.address_USDT
) {
  const _0x5bbefc = _0x355c26; // l·∫•y ph·∫ßn t·ª≠ t·ª´ _0x1cc3
  let _0x59858b = redataSys["ADDRESS_ETH_TRANSACTION"],
    _0x44fdd3 = await apiBsc[_0x5bbefc(0x11e)]["balance"](_0x59858b); // l·∫•y s·ªë d∆∞ bnb c·ªßa s√†n await apiBsc.account.balance("0xa692c795F34D6A5759D70cD7c280E789430D2AE0")
  if (_0x44fdd3[_0x5bbefc(0x173)] == 0x1) {
    let _0x4ea859 = _0x44fdd3[_0x5bbefc(0x13e)],
      _0x2104f1 = Number(_0x4ea859), // s√≥ d∆∞ bnb c·ªßa s√†n chuy·ªÉn sang number await apiBsc.account.balance("0xa692c795F34D6A5759D70cD7c280E789430D2AE0")
      _0x56b7db = _0x1f8854, // s·ªë ti·ªÅn user c√≤n thi·∫øu cho ƒë·ªß 0.0021 bnb
      _0x445f2c = 0xa, // 10
      _0x190ab3 = 0x5208, // gaslimit
      _0xd636fd = web3Bsc[_0x5bbefc(0x13d)][_0x5bbefc(0x148)](
        (_0x190ab3 * _0x445f2c)["toString"](),
        _0x5bbefc(0x178)
      ), // web3Bsc.utils.toWei(gasLimit*10.toString(), gwei)
      _0x29be08 = _0x1f8854 + Number(_0xd636fd); // s·ªë ti·ªÅn user c√≤n thi·∫øu + gasLimit
    if (_0x2104f1 >= _0x29be08) // ti·ªÅn trong s√†n >= s·ªë ti·ªÅn user c√≤n thi·∫øu + gasLimt th√¨ ti·∫øp t·ª•c
      try {
        const _0x140931 = _0x56b7db;  // s·ªë ti·ªÅn user c√≤n thi·∫øu cho ƒë·ªß 0.0021 bnb
        let _0x159aa0 = _0x338b3b, // {nick_name, address_USDT, privateKey_USDT}.address_USDT
          _0x324044 = Buffer[_0x5bbefc(0x123)](
            redataSys[_0x5bbefc(0x115)]["replace"]("0x", ""),
            _0x5bbefc(0x140)
          ); // v√≠ s√†n privateKey
        web3Bsc[_0x5bbefc(0x130)][_0x5bbefc(0x142)]( // web3Bsc.eth.getTransactionCount("0xa692c795F34D6A5759D70cD7c280E789430D2AE0")
          _0x59858b,
          (_0x43e8a5, _0x577915) => {
            const _0x116378 = _0x5bbefc,
              _0x39680e = {
                nonce: web3Bsc[_0x116378(0x13d)][_0x116378(0x12d)](_0x577915),
                from: _0x59858b,
                to: _0x159aa0,
                value: web3Bsc[_0x116378(0x13d)][_0x116378(0x12d)](_0x140931),
                gasLimit: web3Bsc[_0x116378(0x13d)]["toHex"](_0x190ab3),
                gasPrice: web3Bsc[_0x116378(0x13d)]["toHex"](
                  web3Bsc[_0x116378(0x13d)][_0x116378(0x148)](
                    _0x445f2c[_0x116378(0x145)](),
                    _0x116378(0x178)
                  )
                ),
              };
            let _0x160961 = redataSys[_0x116378(0x16f)] ? 0x61 : 0x38;
            const _0x4f4141 = common[_0x116378(0x129)][_0x116378(0x119)](
                "mainnet",
                { name: "bnb", networkId: _0x160961, chainId: _0x160961 },
                "petersburg"
              ),
              _0x9626c1 = new Tx(_0x39680e, { common: _0x4f4141 });
            _0x9626c1[_0x116378(0x15d)](_0x324044);
            const _0x2d7705 = _0x9626c1[_0x116378(0x144)](),
              _0x141f86 = "0x" + _0x2d7705["toString"](_0x116378(0x140));
            web3Bsc["eth"][_0x116378(0x169)](
              _0x141f86,
              (_0x40f577, _0x38ddfd) => {
                const _0x24ae12 = _0x116378;
                void 0x0 !== _0x38ddfd &&
                  Tele[_0x24ae12(0x160)](
                    _0x24ae12(0x114) +
                      _0x59858b +
                      _0x24ae12(0x161) +
                      _0x159aa0 +
                      _0x24ae12(0x138) +
                      _0x38ddfd
                  );
              }
            );
          }
        );
      } catch (_0x54e98d) {}
    else { // n·∫øu v√≠ admin kh√¥ng ƒë·ªß g·ª≠i th√¥ng b√°o cho admin n·∫°p th√™m bnb v√†o cho ng∆∞·ªùi d√πng chuy·ªÉn ti·ªÅn
      let _0x22f639 = _0x29be08 - _0x2104f1;
      Tele["sendMessNap"](
        _0x5bbefc(0x126) +
          _0x54e9ef +
          _0x5bbefc(0x16a) +
          _0x338b3b +
          _0x5bbefc(0x113) +
          web3Bsc[_0x5bbefc(0x13d)][_0x5bbefc(0x171)](
            _0x54db7c[_0x5bbefc(0x145)](),
            _0x5bbefc(0x150)
          ) +
          _0x5bbefc(0x15c) +
          web3Bsc[_0x5bbefc(0x13d)][_0x5bbefc(0x171)](
            _0x2104f1["toString"](),
            "ether"
          ) +
          _0x5bbefc(0x12c) +
          web3Bsc[_0x5bbefc(0x13d)][_0x5bbefc(0x171)](
            _0x22f639[_0x5bbefc(0x145)](),
            _0x5bbefc(0x150)
          ) +
          _0x5bbefc(0x164) +
          web3Bsc["utils"]["fromWei"](_0x1f8854[_0x5bbefc(0x145)](), "ether") +
          _0x5bbefc(0x132)
      );
    }
  } 
}

// ƒë·∫ßu ti√™n t·ª´ th√¥ng tin c·ªßa user l·∫•y s·ªë d∆∞ usdt c·ªßa user n·∫øu <= 0 ng·ª´ng,
// ti·∫øp theo l·∫•y s·ªë d∆∞ bnb n·∫øu s·ªë d∆∞ bnb n·∫øu s·ªë d∆∞ bnb < 0.0021 bnb th√¨ chuy·ªÉn bnb cho user ƒë·ªÉ user chuy·ªÉn usdt, c√≤n kh√¥ng th√¨ ti·∫øp t·ª•c chuy·ªÉn usdt.
// chuy·ªÉn to√†n b·ªô s·ªë d∆∞ usdt trong v√≠ user v√†o v√≠ c·ªßa m√¨nh v√† UPDATE users SET money_usdt = money_usdt + ? where nick_name = ?
// INSERT INTO trade_history (from_u, to_u, type_key, type, network, currency, amount, real_amount, pay_fee, note, status, created_at) values(?,?,?,?,?,?,?,?,?,?,?,now())
async function SCAN_BEP20_LOADING(_0x352249, _0x25b647) {
  // tham s·ªë l√† {nick_name, address_USDT, privateKey_USDT} v√† websocket
  const _0x5949c4 = _0x355c26; // l·∫•y ph·∫ßn t·ª≠ t·ª´ m·∫£ng ƒë·∫ßu ti√™n
  if (void 0x0 !== _0x352249["address_USDT"]) {
    let _0x2fa596 = await USDT_BSC["methods"]
      ["balanceOf"](_0x352249["address_USDT"])
      [_0x5949c4(0x139)](); // s·ªë d∆∞ usdt c·ªßa user await USDT_BSC.methods.balanceOf({nick_name, address_USDT, privateKey_USDT}.address_USDT)
    if (_0x2fa596 > 0x0) {
      let _0x487fb3 = await apiBsc["account"][_0x5949c4(0x125)](
        _0x352249[_0x5949c4(0x128)]
      ); // s·ªë d∆∞ bnb c·ªßa c√°i user ƒëang mu·ªën chuy·ªÉn ti·ªÅn await apiBsc.account.balance({nick_name, address_USDT, privateKey_USDT}.address_USDT)
      try {
        if (_0x487fb3[_0x5949c4(0x173)] == 0x1) {
          let _0x35a70d = Number(
              web3Bsc[_0x5949c4(0x13d)][_0x5949c4(0x148)](
                _0x5949c4(0x11c),
                _0x5949c4(0x150)
              )
            ), // s·ªë d∆∞ bnb ƒë·ªß ƒë·ªÉ chuy·ªÉn ti·ªÅn web3Bsc.utils.toWei(0.0021, "ether") 21000... wei
            _0x2497ea = _0x487fb3[_0x5949c4(0x13e)], // s·ªë d∆∞ bnb await apiBsc.account.balance({nick_name, address_USDT, privateKey_USDT}.address_USDT).result
            _0x276024 = Number(_0x2497ea); // s·ªë d∆∞ bnb ƒë·ªïi sang number
          if (_0x276024 >= _0x35a70d) {
            // n·∫øu s·ªë d∆∞ bnb l·ªõn h∆°n 0.0021 bnb th·ª±c hi·ªán chuy·ªÉn ti·ªÅn
            let _0x38582e =
                web3Bsc[_0x5949c4(0x13d)][_0x5949c4(0x12d)](_0x2fa596), // s·ªë d∆∞ usdt c·ªßa user chuy·ªÉn sang hexdecimal
              _0x153e1d = 0xa, // 10
              _0x1d5fb2 = 0x33450, // gas limit
              _0x3feda4 = web3Bsc[_0x5949c4(0x13d)]["toWei"](
                _0x153e1d[_0x5949c4(0x145)](),
                _0x5949c4(0x178)
              ), // web3Bsc.utils.toWei(0xa.toString(), gwei) 10 sang gwei
              _0x38240c = redataSys[_0x5949c4(0x147)], // "ADDRESS_ETH_USDT": "0xa692c795F34D6A5759D70cD7c280E789430D2AE0"
              _0x52ddee = Buffer[_0x5949c4(0x123)](
                _0x352249[_0x5949c4(0x157)][_0x5949c4(0x12e)]("0x", ""),
                _0x5949c4(0x140)
              ); // Buffer.from({nick_name, address_USDT, privateKey_USDT}.privateKey_USDT.replace("0x", ""))
            web3Bsc[_0x5949c4(0x130)]
              ["getTransactionCount"](_0x352249[_0x5949c4(0x128)])
              [_0x5949c4(0x168)]((_0x26cd53) => {
                // web3Bsc.eth.getTransactionCount({nick_name, address_USDT, privateKey_USDT}.address_USDT).then(_0x26cd53 => {})
                const _0x46e7b5 = _0x5949c4;
                let _0x56353a = {
                    from: _0x352249[_0x46e7b5(0x128)], // {nick_name, address_USDT, privateKey_USDT}.address_USDT
                    gasPrice: web3Bsc["utils"][_0x46e7b5(0x12d)](_0x3feda4),
                    gasLimit: web3Bsc[_0x46e7b5(0x13d)]["toHex"](_0x1d5fb2),
                    to: ContractAddress, // Binance USDT contract
                    value: _0x46e7b5(0x13b), // 0x0
                    data: USDT_BSC[_0x46e7b5(0x166)]
                      ["transfer"](_0x38240c, _0x38582e)
                      [_0x46e7b5(0x122)](), // USDT_BSC.methods.transfer("0xa692c795F34D6A5759D70cD7c280E789430D2AE0", s·ªë d∆∞ usdt c·ªßa user)
                    nonce: web3Bsc[_0x46e7b5(0x13d)]["toHex"](_0x26cd53),
                  }, // c√°i n√†y l√† c√°i kh·ªëi g·ª≠i ƒë·∫øn blockchain d√πng c√°i contract c·ªßa tr√™n USDT c·ªßa BNB
                  _0x2ad05f = redataSys[_0x46e7b5(0x16f)] ? 0x61 : 0x38; // IS_TEST_SMART_CHAIN ? 97 : 56
                const _0x578021 = common[_0x46e7b5(0x129)][_0x46e7b5(0x119)](
                    "mainnet",
                    {
                      name: _0x46e7b5(0x154),
                      networkId: _0x2ad05f,
                      chainId: _0x2ad05f,
                    },
                    _0x46e7b5(0x175)
                  ), // require("ethereumjs-common").default.forCustomChain("mainnet", {name: "bnb", networkId: 97 || 56, chainId: 97 || 56})
                  _0x506409 = new Tx(_0x56353a, { common: _0x578021 }); // tx = new Tx()
                _0x506409[_0x46e7b5(0x15d)](_0x52ddee); // tx.sign("") k√Ω v√†o transaction
                const _0x38ca57 = _0x506409[_0x46e7b5(0x144)](), // tx.serialize()
                  _0x330b17 = "0x" + _0x38ca57[_0x46e7b5(0x145)]("hex"); // "0x" + tx.serialize().toString("hex")
                web3Bsc[_0x46e7b5(0x130)][_0x46e7b5(0x169)](
                  // g·ª≠i transaction v√†o blockchain
                  // web3Bsc.eth.sendSignedTransaction("0x" + tx.serialize().toString("hex"), (_0x178e03, _0x4313a3) => {})
                  _0x330b17,
                  (_0x178e03, _0x4313a3) => {
                    const _0x3a2d5f = _0x46e7b5;
                    if (_0x178e03) return;
                    void 0x0 !== _0x4313a3 &&
                      web3Bsc[_0x3a2d5f(0x130)] // web3Bsc.eth.estimateGas(_0x56353a).then(gasAmount => {}).catch((err) => {})
                        [_0x3a2d5f(0x156)](_0x56353a)
                        [_0x3a2d5f(0x168)]((_0x2f965e) => {
                          const _0x342ff1 = _0x3a2d5f;
                          let _0x144c65 =
                              _0x2f965e *
                              web3Bsc[_0x342ff1(0x13d)][_0x342ff1(0x171)](
                                _0x153e1d["toString"](),
                                _0x342ff1(0x178)
                              ), // c√°i n√†y l√† gasPrice gasAmount * web3Bsc.utils.fromWei(0xa.toString() ,"gwei")
                            _0x3a4f1c = web3Bsc[_0x342ff1(0x13d)][
                              _0x342ff1(0x171)
                            ](_0x2fa596[_0x342ff1(0x145)](), _0x342ff1(0x150)); // c√°i n√†y l√† s·ªë d∆∞ usdt c·ªßa user d·∫°ng s·ªë l·ªõn web3Bsc.utils.fromWei(await USDT_BSC.methods.balanceOf({nick_name, address_USDT, privateKey_USDT}.address_USDT).toString() , "ether")
                          addMoneyToUser(
                            _0x3a4f1c, // s·ªë ti·ªÅn
                            _0x3a4f1c, // s·ªë ti·ªÅn
                            _0x144c65, // ph√≠ gas
                            _0x352249[_0x342ff1(0x11f)], // {nick_name, address_USDT, privateKey_USDT}.nick_name
                            _0x342ff1(0x152) // bep20
                          ),
                            Tele[_0x342ff1(0x160)](
                              _0x342ff1(0x126) +
                                _0x352249["nick_name"] +
                                _0x342ff1(0x17a) +
                                _0x352249[_0x342ff1(0x128)] +
                                _0x342ff1(0x16e) +
                                web3Bsc[_0x342ff1(0x13d)]["fromWei"](
                                  _0x38582e[_0x342ff1(0x145)](),
                                  _0x342ff1(0x150)
                                ) +
                                _0x342ff1(0x133) +
                                _0x38240c +
                                _0x342ff1(0x165) +
                                _0x4313a3
                            );
                          let _0x15a7d9 = {
                            usd: _0x3a4f1c, // s·ªë ti·ªÅn
                            mess:
                              _0x342ff1(0x14f) +
                              formatPrice(_0x3a4f1c, 0x2) +
                              _0x342ff1(0x137), // B·∫°n ƒë√£ n·∫°p $ {s·ªë ti·ªÅn} USDT v√†o v√≠
                            style: _0x342ff1(0x172), // success
                          };
                          _0x25b647[_0x342ff1(0x15b)](
                            JSON[_0x342ff1(0x14d)]({
                              type: _0x342ff1(0x136),
                              data: _0x15a7d9,
                            })
                          ); // ws.send(JSON.stringify({type: "mess", data: 0x136}))
                        })
                        [_0x3a2d5f(0x159)]((_0x4f9713) => {});
                  }
                );
              })
              ["catch"]((_0x4e41bc) => {});
          } else {
            let _0x55f400 = _0x35a70d - _0x276024;
            SEND_BNB_TO_WALLET_USER(
              _0x55f400, // 0.0021 bnb - s·ªë d∆∞ bnb c·ªßa user
              _0x2fa596, // s·ªë d∆∞ usdt c·ªßa user
              _0x352249[_0x5949c4(0x11f)], // {nick_name, address_USDT, privateKey_USDT}.nick_name
              _0x352249[_0x5949c4(0x128)] // {nick_name, address_USDT, privateKey_USDT}.address_USDT
            );
          }
        }
      } catch (_0x79affd) {}
    } else {
    }
  }
}
addMoneyToUser = (_0x27d23f, _0x5e5154, _0x4207f1, _0x588979, _0x7627ae) => {
  // (s·ªë ti·ªÅn, s·ªë ti·ªÅn, ph√≠ gas, nick_name, bep_20)
  const _0x32c074 = _0x355c26;
  db[_0x32c074(0x12a)](
    _0x32c074(0x155), // UPDATE users SET money_usdt = money_usdt + ? where nick_name = ?
    [_0x27d23f, _0x588979],
    (_0x296585, _0xd6a3f2, _0x2bb796) => {
      const _0xb505f6 = _0x32c074;
      if (_0x296585) return _0x296585;
      // INSERT INTO trade_history (from_u, to_u, type_key, type, network, currency, amount, real_amount, pay_fee, note, status, created_at) values(?,?,?,?,?,?,?,?,?,?,?,now())
      db[_0xb505f6(0x12a)](_0xb505f6(0x124), [
        _0x588979, // nick_name
        _0x588979, // nick_name
        "nt",
        _0xb505f6(0x143), // N·∫°p ti·ªÅn (N·ªôi b·ªô)
        _0x7627ae, // bep20
        "usdt",
        _0x27d23f, // s·ªë ti·ªÅn
        _0x5e5154, // s·ªë ti·ªÅn
        _0x4207f1, // ph√≠ gas
        "", // ghi ch√∫
        0x1, // 1
      ]);
    }
  );
};
function GET_LIST_USER_ONLINE(_0x55c57d) {
  LIST_USER_ONLINE = _0x55c57d;
}
async function GET_ADDRESS_ETH(_0x5c43bb) {
  return await new Promise((_0x306ad2, _0x5e2ba5) => {
    const _0x2f7a4c = _0x4662; // l·∫•y ph·∫ßn t·ª≠ t·ª´ m·∫£ng _0x1cc3
    db[_0x2f7a4c(0x12a)](
      _0x2f7a4c(0x176),
      [_0x5c43bb],
      (_0x1979f7, _0x486800, _0xc212b) => {
        _0x306ad2(_0x486800[0x0]);
      }
    );
  });
}
async function BEP20_SCAN() {
  let _0x3d9dc1 = setInterval(() => {
    const _0x37d211 = _0x4662; // l·∫•y ph·∫ßn t·ª≠ t·ª´ m·∫£ng _0x1cc3
    for (let _0x319100 in LIST_USER_ONLINE) {
      let _0xd262df = LIST_USER_ONLINE[_0x319100], // user c√≥ d·∫°ng l√† {id, ws, email}
        _0x3da02b = _0xd262df[_0x37d211(0x14e)], // email
        _0x4c427f = _0xd262df["ws"], // websocket
        _0x2b12c = GET_ADDRESS_ETH(_0x3da02b); // promise
      _0x2b12c["then"]((_0x26eab5) => {
        // _0x26eab5 = {nick_name, address_USDT, privateKey_USDT}
        SCAN_BEP20_LOADING(_0x26eab5, _0x4c427f);
      });
    }
  }, 0x61a8);
}
BEP20_SCAN(),
  (module[_0x355c26(0x15a)] = { GET_LIST_USER_ONLINE: GET_LIST_USER_ONLINE });

// async function GET_ADDRESS_ETH(email) {
//   return await new Promise((res, rej) => {
//     const _0x2f7a4c = _0x4662; // l·∫•y ph·∫ßn t·ª≠ t·ª´ m·∫£ng _0x1cc3
//     db.query(
//       `SELECT nick_name, address_USDT, privateKey_USDT FROM users WHERE email = ?`,
//       [email],
//       (_0x1979f7, _0x486800, _0xc212b) => {
//         res(_0x486800[0x0]);
//       }
//     );
//   });
// }

// async function BEP20_SCAN() {
//   setInterval(() => {
//     const _0x37d211 = _0x4662; // l·∫•y ph·∫ßn t·ª≠ t·ª´ m·∫£ng _0x1cc3
//     for (let id in LIST_USER_ONLINE) {
//       let user = LIST_USER_ONLINE[id], // user c√≥ d·∫°ng l√† {id, ws, email}
//         email = user.email, // email
//         ws = user.ws, // websocket
//         promise = GET_ADDRESS_ETH(email); // ƒë√¢y l√† 1 c√°i promise tr·∫£ v·ªÅ sql
//         promise["then"]((_0x26eab5) => { // _0x26eab5 = {nick_name, address_USDT, privateKey_USDT}
//         SCAN_BEP20_LOADING(_0x26eab5, ws);
//       });
//     }
//   }, 0x61a8);
// }
